<!DOCTYPE html>
<html lang="en" dir="">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <title>estadisticas</title>
    <link href="https://fonts.googleapis.com/css?family=Nunito:300,400,400i,600,700,800,900" rel="stylesheet" />
    <link href="/dist-assets/css/themes/lite-purple.min.css" rel="stylesheet" />
    <link href="/dist-assets/css/plugins/perfect-scrollbar.min.css" rel="stylesheet" />
      <!-- Bootstrap 5 CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet"/>
  <!-- ApexCharts -->
  <script src="https://cdn.jsdelivr.net/npm/apexcharts"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <style>
        #dismissedChart,#activeVsClosedChart,#casesByCompanyChart {
          max-width: 400px; /* Ajusta el ancho máximo */
          max-height: 400px; /* Ajusta la altura máxima */
          margin-left: 200px;
        }
        .chart-container {
    max-height: 200px;  /* Ajusta este valor según sea necesario */
    overflow: hidden;
  }
    
        .loading_wrap {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: #f4fdf6; /* Fondo más claro */
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            z-index: 9999;
            overflow: hidden;
        }
    
        /* Animación del logo girando sobre el eje X */
        .loader_logo {
            width: 100px;
            height: 100px;
           
        }
    
        .loader_logo img {
            width: 100%;
            height: 100%;
        }
    
        @keyframes flip-x {
            0% { transform: rotateX(0deg); }
            50% { transform: rotateX(180deg); }
            100% { transform: rotateX(360deg); }
        }
    
        /* Contenedor de las olas */
        .your-container {
            width: 100%;
            position: absolute;
            bottom: 0;
            overflow: hidden;
        }
    
        .css-waves {
            width: 100%;
            height: 200px; /* Olas más grandes */
        }
    
        .animated-waves use {
            animation: wave-animation 10s infinite linear;
        }
    
        /* Invirtiendo la paleta de colores con mayor diferencia */
        .animated-waves use:nth-child(1) { fill: #1c562d; animation-duration: 6s; transform: scaleY(1.2) translateY(15px); } /* Ola más alta */
        .animated-waves use:nth-child(2) { fill: #244e31; animation-duration: 8s; transform: scaleY(1.1) translateY(5px); }
        .animated-waves use:nth-child(3) { fill: #668770; animation-duration: 10s; transform: scaleY(0.9) translateY(-5px); } /* Ola más baja */
        .animated-waves use:nth-child(4) { fill: #b4cfbb; animation-duration: 12s; transform: scaleY(0.8) translateY(-10px); } /* Ola más baja aún */
    
        @keyframes wave-animation {
            0% { transform: translateX(0); }
            50% { transform: translateX(-50%); } /* Se mueve solo la mitad del ancho */
            100% { transform: translateX(0); } /* Vuelve sin saltos */
        }
    </style>
</head>

<body >
    <div class="loading_wrap" id="loading_wrap">
        <div class="loader_logo">
            <div class="spinner-bubble spinner-bubble-success m-5"></div>
        </div>

        <div class="your-container">
            <svg class="css-waves" xmlns="http://www.w3.org/2000/svg" viewBox="0 24 150 40" preserveAspectRatio="none">
                <defs>
                    <path id="wave-pattern" d="M-160 44c30 0 58-18 88-18s58 18 88 18 58-18 88-18 58 18 88 18v44h-352z"></path>
                </defs>
                <g class="animated-waves">
                    <use href="#wave-pattern" x="0" y="0"></use>
                    <use href="#wave-pattern" x="50" y="5"></use>
                    <use href="#wave-pattern" x="100" y="10"></use>
                    <use href="#wave-pattern" x="150" y="15"></use>
                </g>
            </svg>
        </div>
    </div>
    <div class="app-admin-wrap layout-horizontal-bar">
        <div class="main-header">
            <div class="logo"><img src="/dist-assets/images/logo.png" alt="" /></div>
            <div class="menu-toggle">
                <div></div>
                <div></div>
                <div></div>
            </div>
            <div class="d-flex align-items-center">
               
            </div>
            <div style="margin: auto"></div>
            <div class="header-part-right">  
                <h4 class="mt-3 mr-3 " id="userNameDisplay"></h4> 
                <a class="link-icon mr-1" href="/index.html" style="font-size:xx-large; color: brown;"><i class="fa-solid fa-power-off"></i></a>
            </div>
        </div>
        <!-- header top menu end-->
        <div class="horizontal-bar-wrap">
            <div class="header-topnav">
                <div class="container-fluid bar-views">
                    <div class="topnav rtl-ps-none" id="" data-perfect-scrollbar="" data-suppress-scroll-x="true">
                        <ul class="menu float-left">
                            <li class="views" id="nuevoCaso">
                                <div>
                                    <div>
                                        <label class="toggle" for="drop-2">Nuevo caso</label>
                                        <a href="nuevoCaso.html"><i class="nav-icon mr-2 i-Library text-white"></i> <span class="text-white">Nuevo caso</span> </a>
                                    </div>
                                </div>
                            </li>
                            <li class="views" id="casosPendientes">
                                <div>
                                    <div>
                                        <label class="toggle" for="drop-2">Mesa de Entrada</label><a href="casosPendientes.html"><i class="nav-icon i-File-Horizontal-Text mr-2 text-white"></i> <span class="text-white">Mesa de Entrada</span></a>
                                       
                                    </div>
                                </div>
                            </li>
                            <li class="views" id="casosGestion">
                                <div>
                                    <div>
                                        <label class="toggle" for="drop-2">Casos en Gestión</label>
                                        <a href="casosEnGestion.html"><i class="nav-icon mr-2 i-Receipt text-white"></i><span class="text-white">Casos en Gestión</span></a>
                                    </div>
                                </div>
                            </li>
                            <li class="views" id="casosLegales">
                                <div>
                                    <div>
                                        <label class="toggle" for="drop-2">Legales</label>
                                        <a href="legales.html"><i class="nav-icon mr-2 i-Receipt text-white"></i><span class="text-white">Legales</span></a>
                                    </div>
                                </div>
                            </li>
                            <li class="views" id="baseUnica">
                                <div>
                                    <div>
                                        <label class="toggle" for="drop-2">Directorio</label>
                                        <a href="baseUnica.html"><i class="nav-icon i-File-Horizontal-Text mr-2 text-white"></i> <span class="text-white">Directorio</span></a>
                                    </div>
                                </div>
                            </li>
                            <li class="views" id="estadisticas">
                                <div>
                                    <div>
                                        <label class="toggle" for="drop-2">Estadísticas</label>
                                        <a href="estadisticas.html"><i class="nav-icon mr-2 i-Bar-Chart-5 text-white"></i> <span class="text-white">Estadísticas</span></a>
                                    </div>
                                </div>
                            </li>
                            <li class="views" id="facturacion">
                                <div>
                                    <div>
                                        <label class="toggle" for="drop-2">Facturación</label>
                                        <a href="facturacion.html"><i class="nav-icon mr-2 i-Windows-2 text-white"></i><span class="text-white">Facturación</span></a>
                                    </div>
                                </div>
                            </li>
                            <li class="views" id="casosPas">
                                <div>
                                    <div>
                                        <label class="toggle" for="drop-2">Mis Casos</label>
                                        <a href="casosPas.html"><i class="nav-icon i-File-Horizontal-Text mr-2 text-white"></i> <span class="text-white">Mis Casos</span></a>
                                    </div>
                                </div>
                            </li>
                            <li class="views" id="novedades">
                                <div>
                                    <div>
                                        <label class="toggle" for="drop-2">Información Útil</label>
                                        <a href="novedades.html"><i class="nav-icon i-File-Horizontal-Text mr-2 text-white"></i> <span class="text-white">Novedades</span></a>
                                    </div>
                                </div>
                            </li>
                            <li class="views" id="whatsapp" style="float:right">
                                <div>
                                    <div>
                                        <label class="toggle" for="drop-2">whatsapp</label>
                                        <a href="https://api.whatsapp.com/send?phone=5491133032850&text=%C2%A1Hola!%20Te%20contacto%20desde%20la%20web%20"> <span class="text-white"><i class="fa-brands fa-whatsapp"></i></span></a>
                                    </div>
                                </div>
                            </li>
                            <li class="views" id="linkedin" style="float:right">
                                <div>
                                    <div>
                                        <label class="toggle" for="drop-2">linkedin</label>
                                        <a href="https://www.linkedin.com/company/in-itinere-int/"> <span class="text-white"><i class="fa-brands fa-linkedin"></i></span></a>
                                    </div>
                                </div>
                            </li>
                        </ul>
                    
                    </div>
                    
                </div>
            </div>
        </div>
        <!-- =============== Horizontal bar End ================-->
        <div class="main-content-wrap d-flex flex-column">
            <!-- ============ Body content start ============= -->
            <div class="container-fluid">
                <ul class="nav nav-tabs mb-4" id="dashboardTabs" role="tablist">
                  <li class="nav-item"><button class="nav-link active" data-bs-toggle="tab" data-bs-target="#casos-ingresados">Casos Ingresados</button></li>
                  <li class="nav-item"><button class="nav-link" data-bs-toggle="tab" data-bs-target="#casos-iniciados">Casos Iniciados</button></li>
                </ul>
                <div class="tab-content">
                  <div class="tab-pane fade show active" id="casos-ingresados">
                    <!-- filtros para ingresados -->
                    <div class="row mb-4">
                      <div class="col-md-3">
                        <select id="range-ing" class="form-select">
                          <option value="year" selected>Año</option>
                          <option value="month">Mes</option>
                          <option value="week">Semana</option>
                        </select>
                      </div>
                      <div class="col-md-3" id="year-ing-wrapper" style="display:none;"><select id="year-ing" class="form-select"></select></div>
                      <div class="col-md-3"><select id="period-ing" class="form-select"></select></div>
                    </div>
                    <div class="row g-4">
                      <div class="col-md-4"><div class="card p-3"><h6>Total de Casos iniciadoa a INT</h6><div id="chart-total-ing"></div></div></div>
                      <div class="col-md-4"><div class="card p-3"><h6>Casos asignados por Ejecutivo</h6><div id="chart-by-ej-ing" style="height:260px;"></div></div></div>
                      <div class="col-md-4"><div class="card p-3"><h6>Tendencia 12 Meses</h6><div id="chart-trend-ing" style="height:260px;"></div></div></div>
                      <div class="col-md-12"><div class="card p-3"><h6>Mapeo Semanal de casos Ingresados</h6><div id="chart-heat-ing" style="height:260px;"></div></div></div>
                    </div>
                  </div>
                  <div class="tab-pane fade" id="casos-iniciados">
                    <!-- filtros para iniciados -->
                    <div class="row mb-4">
                      <div class="col-md-3">
                        <select id="range-init" class="form-select">
                          <option value="year" selected>Año</option>
                          <option value="month">Mes</option>
                          <option value="week">Semana</option>
                        </select>
                      </div>
                      <div class="col-md-3" id="year-init-wrapper" style="display:none;"><select id="year-init" class="form-select"></select></div>
                      <div class="col-md-3"><select id="period-init" class="form-select"></select></div>
                    </div>
                    <div class="row g-4">
                      <div class="col-md-4"><div class="card p-3"><h6>Total de casos iniciados a INT</h6><div id="chart-total-init"></div></div></div>
                      <div class="col-md-4"><div class="card p-3"><h6>Casos iniciados por ejecutivo</h6><div id="chart-by-ej-init" style="height:260px;"></div></div></div>
                      <div class="col-md-4"><div class="card p-3"><h6>Tendencia 12 Meses</h6><div id="chart-trend-init" style="height:260px;"></div></div></div>
                      <div class="col-md-12"><div class="card p-3"><h6>Mapeo Semanal de casos Iniciados</h6><div id="chart-heat-init" style="height:260px;"></div></div></div>
                    </div>
                  </div>
                </div>
              </div>
                    <!-- MAIN INBOX SIDEBAR-->
        </div>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/apexcharts"></script>
    <script src="/dist-assets/js/estadisticas.js"></script>
  <script>
        document.addEventListener('DOMContentLoaded', () => {
            window.addEventListener("load", function () {
            let loader = document.getElementById("loading_wrap");
            loader.style.opacity = "0"; // Desvanecer el loader
            setTimeout(() => {
                loader.style.display = "none"; // Ocultar completamente después de la animación
            }, 500);
        });
            const userData = JSON.parse(localStorage.getItem('userData'));
         const permission = userData.permission; // Asumimos que este es un string con el permiso del usuario
                const name = userData.name;
            if (userData) {
               
                document.getElementById('userNameDisplay').innerText = `${userData.name}`;
                // Ocultar todas las pestañas inicialmente
                document.querySelectorAll('.views').forEach(view => {
                    view.style.display = 'none'; // Ocultar todas las pestañas
                });
        
                // Mostrar pestañas basadas en permisos
                if (permission === 'super usuario') {
                    document.getElementById('nuevoCaso').style.display = 'block';
                    document.getElementById('casosPendientes').style.display = 'block';
                    document.getElementById('casosGestion').style.display = 'block';
                    document.getElementById('baseUnica').style.display = 'block';
                    document.getElementById('estadisticas').style.display = 'block';
                    document.getElementById('facturacion').style.display = 'block';
                    document.getElementById('casosPas').style.display = 'block';
                    document.getElementById('casosLegales').style.display = 'block';
                    document.getElementById('novedades').style.display = 'block';
                } else if (permission === 'ejecutivo') {
                    document.getElementById('nuevoCaso').style.display = 'block';
                    document.getElementById('casosGestion').style.display = 'block';
                    document.getElementById('baseUnica').style.display = 'block';
                    document.getElementById('estadisticas').style.display = 'block';
                } else if (permission === 'mesa de entrada') {
                    document.getElementById('nuevoCaso').style.display = 'block';
                    document.getElementById('baseUnica').style.display = 'block';
                    document.getElementById('casosPendientes').style.display = 'block';
                } else if (permission === 'mediacion') {
                    document.getElementById('nuevoCaso').style.display = 'block';
                    document.getElementById('casosGestion').style.display = 'block';
                    document.getElementById('baseUnica').style.display = 'block';
                    document.getElementById('estadisticas').style.display = 'block';
                }else if (permission === 'jefe de operaciones') {
                    document.getElementById('nuevoCaso').style.display = 'block';
                    document.getElementById('casosGestion').style.display = 'block';
                    document.getElementById('baseUnica').style.display = 'block';
                    document.getElementById('estadisticas').style.display = 'block';

                }else if (permission === 'PAS') {
                    document.getElementById('casosPas').style.display = 'block';
                    document.getElementById('novedades').style.display = 'block';
                    document.getElementById('whatsapp').style.display = 'block';
                    document.getElementById('linkedin').style.display = 'block';

                }else if (permission === 'legales') {
                    document.getElementById('casosGestion').style.display = 'block';
                    document.getElementById('baseUnica').style.display = 'block';
                }else if (permission === 'FACTURACION') {
                    document.getElementById('facturacion').style.display = 'block';
                    document.getElementById('baseUnica').style.display = 'block';
                    document.getElementById('estadisticas').style.display = 'block';
                }
            } else {
                // Si no hay información de usuario, redirigir a login
                window.location.href = 'index.html';
            }

// Validar si el permiso es "ejecutivo"
if (permission === 'ejecutivo' || permission === 'mediacion'|| permission === 'jefe de operaciones') {
    // Lista de IDs de los gráficos
    const graficos = [
        'grafico-facturados-1',
        'graficoFacturadoEjecutivo-1',
        'graficoFacturadosMontoEjecutivo-1',
        'graficoCobrados-1',
        'graficoComision-1',
        'graficoPercibido-1',
        'graficoPercibidoCia-1',
        'graficoPromedio-1',
        'graficoPromedioCias-1'
    ];

    // Ocultar cada gráfico
    graficos.forEach(id => {
        const grafico = document.getElementById(id);
        if (grafico) {
            grafico.style.display = 'none';  // Oculta el gráfico
        }
    });
}
        });
  </script>
   <!-- ============ Search UI Start ============= -->
   <script src="https://apis.google.com/js/api.js" async defer></script>
   <script src="https://accounts.google.com/gsi/client" async defer></script>
   <script src="https://apis.google.com/js/api.js"></script>
   <!-- Llamadas a `gapiLoaded` y `gisLoaded` cuando se cargan los scripts -->
   <!-- <script async defer src="https://apis.google.com/js/api.js" onload="gapiLoaded()"></script>
   <script async defer src="https://accounts.google.com/gsi/client" onload="gisLoaded()"></script> -->
    <!-- ============ Search UI End ============= -->
    <script src="/dist-assets/js/plugins/jquery-3.3.1.min.js"></script>
    <script src="/dist-assets/js/plugins/bootstrap.bundle.min.js"></script>
    <script src="/dist-assets/js/plugins/perfect-scrollbar.min.js"></script>
    <script src="/dist-assets/js/scripts/script.min.js"></script>
    <script src="/dist-assets/js/scripts/sidebar-horizontal.script.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/apexcharts"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="/dist-assets/js/sheets.js"></script>
    <!-- <script src="/dist-assets/js/estadisticas.js"></script> -->

</body>

</html>